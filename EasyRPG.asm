.model LARGE
.stack 100h
.data

;MENU DATA

START_COLUMN DW ? ;The starting column
START_ROW DW ? ;The starting row
BOX_COLOR DB ? ;The Color of the surrounding box
BOXSIZE DW ? ;The size of the surrounding box
PIXLOC DW ? ;pixel location
FSTMENUTEXT DB "Square", 0DH, 0AH, '$' ;text for first menu item
SNDMENUTEXT DB "Triang", 0DH, 0AH, '$' ;text for the second menu item
TRDMENUTEXT DB "Circle", 0DH, 0AH, '$' ;text for the third menu item
FRTMENUTEXT DB "Plymrph", 0DH, 0AH, '$' ;text for the fourth menu item
HPTEXT DB "PLYR HP:", 0DH, 0AH, '$' ;TEXT FOR THE PLAYERS HP
HPPOS DB ? ;THE POSTION OF THE HP BAR
MHPTEXT DB "MSTR HP:", 0DH, 0AH, '$'
MHPPOS DB ? ;TEXT FOR THE MONSTERS HP
CURRENT_ROW DB ? ;The currenct selection row
POINTER_SYM DB "*", 0DH, 0AH, '$' ;The Character used for the pointer
CURRENT_SLC DW ? ;The current selected menu item
FAILPLY DB "You failed to use polymorph.", 0DH, 0AH, '$' ;PLYMRPH FAIL MESSAGE

;MAP DATA
CURRENT_POS DW ? ;CURRENT POSITION ON THE MAP
BATTLE_CNT DW ? ;HOW MANY STEPS TAKEN USED FOR STARTING BATTLES

;MAIN VARIABLES
INBATTLE DW ? ;1 IF IN BATTLE AND 0 IF NOT
TEMPPOS DW ? ;SAVES THE CURRENT POSITION INCASE MOVE IS NOT VALID
ISMOVEVALID DW ? ;BOOL 1 IF MOVE IS VALID, 0 IF MOVE IS NOT VALID

;DELAY TIMER VARIABLES
TICKCOUNT DW 00
LOWERCOUNT DW 00
HIGHERCOUNT DW 00
TEMPCOUNT DW 00
ISDELAYDONE DW ? ;1 IF DONE, 0 IF NOT
STARTDELAY DW ? ;1 TO START THE DELAY TIMER
LOWERCOUNT2 DW 00
HIGHERCOUNT2 DW 00
SLEEPTIME DW 00 ;TIME TO SLEEP

;BATTLE VARIABLES
PLAYERHP DW ? ;THE PLAYERS HP
MONSTERHP DW ? ;THE MONSTERS HP
MONSTERHP2 DW ? ;USED FOR THE FINAL BOSS
MONSTERHP3 DW ? ;USED FOR THE FINAL BOSS
MONSTERHP4 DW ? ;USED FOR THE FINAL BOSS
ISBOSS DW ? ;DETERMINES IF IT'S THE FINAL BOSS(1) OR NOT(0)

;START TEXT
LN1 DB "The controls:", 0DH, 0AH, '$'
LN2	DB "Up moves character/menu up", 0DH, 0AH, '$'
LN3 DB "Down moves character/menu down", 0DH, 0AH, '$'
LN4 DB "Right moves character right", 0DH, 0AH, '$'
LN5 DB "LefT moves character left", 0DH, 0AH, '$'
LN6 DB "Enter = select a menu option", 0DH, 0AH, '$'
LN7 DB "ESC = exit the game", 0DH, 0AH, '$'
LN8 DB "The Princess of Circle Land has been kidnapped!", 0DH, 0AH, '$'
LN9 DB "The Square King of Squaretopia is to blame.", 0DH, 0AH, '$'
LN10 DB "You have been chosen to fight his Trecherous Triangle Troupe, slay the Square King, and save the Radiant Round Princess.", 0DH, 0AH, '$'
LN13 DB "(Press Enter to continue)", 0DH, 0AH, '$'

;END TEXT
TEND DB "You died, THE END.", 0DH, 0AH, '$'
CNGRTS DB "CONGRATS YOU SAVED THE PRINCESS!!!", 0DH, 0AH, '$'

.code
main proc
	MOV AX, @DATA
	MOV DS, AX
	MOV AX, 0A000H
	MOV ES, AX
	MOV DI, 0
	CLD
	
	;SAVING THE CURRENT VIDEO MODE
	MOV AH, 0FH
	INT 10H
	PUSH AX
	
	;CHANGING VIDEO MODE
	MOV AH, 00
	MOV AL, 13H
	INT 10H
	
	;INITIALIZE DATA
	MOV CURRENT_POS, 349
	MOV INBATTLE, 1
	MOV DI, 36867
	MOV PLAYERHP, 20
	MOV MONSTERHP, 15
	MOV MONSTERHP2, 0
	MOV MONSTERHP3, 0
	MOV MONSTERHP4, 0
	MOV ISBOSS, 0
	MOV ISDELAYDONE, 1
	MOV STARTDELAY, 0
	MOV TICKCOUNT, 3
	MOV BATTLE_CNT, 0
	
	;MENU VARIABLES
	MOV CURRENT_ROW, 16	
	MOV CURRENT_SLC, 1	;THE CURRENT MENU SELECTED, USED FOR PROCESSING INPUT
	
	
INTRO:
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 1
	MOV DL, 1
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset LN1
	MOV AH, 09H
	INT 21H	
	
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 2
	MOV DL, 1
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset LN2
	MOV AH, 09H
	INT 21H	

	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 3
	MOV DL, 1
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset LN3
	MOV AH, 09H
	INT 21H	
	
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 4
	MOV DL, 1
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset LN4
	MOV AH, 09H
	INT 21H	
	
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 5
	MOV DL, 1
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset LN5
	MOV AH, 09H
	INT 21H	
	
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 6
	MOV DL, 1
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset LN6
	MOV AH, 09H
	INT 21H	
	
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 7
	MOV DL, 1
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset LN7
	MOV AH, 09H
	INT 21H	
	
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 9
	MOV DL, 0
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset LN8
	MOV AH, 09H
	INT 21H	
	
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 11
	MOV DL, 0
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset LN9
	MOV AH, 09H
	INT 21H	
	
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 13
	MOV DL, 0
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset LN10
	MOV AH, 09H
	INT 21H	
	
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 17
	MOV DL, 0
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset LN13
	MOV AH, 09H
	INT 21H	
	
	STARTLOOP:
		MOV AH, 01
		INT 16H
		JZ STARTLOOP
		MOV AH, 0
		INT 16H
		CMP AH, 1CH
		JE STARTGAME
		JMP STARTLOOP
	
STARTGAME:
	CALL CLEARSCN
	CALL DRAWMAPTILES
	CALL DRAWHERO
	JMP MAINLOOP
	
MAINLOOP:
	CMP INBATTLE, 1
	JE FIELDLOOP
	JMP BATTLELOOP
	
BATTLELOOP:
CMP PLAYERHP, 0
JE FAILGAME
CMP PLAYERHP, 21
JAE FAILGAME
CMP MONSTERHP, 0
JE BTLOVER
CMP MONSTERHP, 21
JAE BTLOVER
CALL REDRAW
	CHECKKEYPRESS:
		CALL DELAY
		MOV AH, 01
		INT 16H
		JZ CHECKKEYPRESS
		MOV AH, 0
		INT 16H
		CMP ISDELAYDONE, 0
		JE BATTLELOOP
		CMP AH, 48H
		JE UPARROW
		CMP AH, 50H
		JE DOWNARROW
		CMP AH, 1CH
		JE PROCMENU
		JMP MAINLOOP
		
BTLOVER:
	CMP ISBOSS, 1
	JE WINGAME
	MOV PLAYERHP, 20
	CALL REDRAW
	JMP STARTFIELD
	
WINGAME:
	CALL CLEARSCN
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 10
	MOV DL, 3
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset CNGRTS
	MOV AH, 09H
	INT 21H
	MOV SLEEPTIME, 30
	CALL SLEEP
	JMP EXIT

FAILGAME:
	CALL CLEARSCN
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 10
	MOV DL, 10
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset TEND
	MOV AH, 09H
	INT 21H
	MOV SLEEPTIME, 30
	CALL SLEEP
	JMP EXIT
		
STARTBATTLE:
	MOV BATTLE_CNT, 0
	MOV INBATTLE, 0
	CALL CLEARSCN
	CALL DRAWMENUBOX
	CALL DRAWTEXT
	CALL DRAWPOINTER
	CMP ISBOSS, 1
	JE BOSS
	MOV MONSTERHP, 15
	CALL DRAWHP
	PUSH DI
	MOV DI, 11240
	CALL DRAWTRIANGLE
	MOV DI, 12320
	CALL DRAWBTLHERO
	POP DI
	JMP MAINLOOP
	BOSS:
	PUSH DI
	MOV DI, 11230
	CALL DRAWSQUARE
	MOV DI, 6763
	CALL DRAWTRIANGLE
	MOV DI, 12320
	CALL DRAWBTLHERO
	POP DI
	MOV MONSTERHP, 20
	MOV MONSTERHP2, 5
	MOV MONSTERHP3, 5
	MOV MONSTERHP4, 5
	JMP MAINLOOP
	
STARTFIELD:
	MOV INBATTLE, 1
	CALL CLEARSCN
	CALL DRAWMAPTILES
	CALL DRAWHERO
	JMP MAINLOOP
	
FIELDLOOP:
	CMP CURRENT_POS, 429
	JE STARTBOSSFIGHT
	CMP CURRENT_POS, 430
	JE STARTBOSSFIGHT
	CMP BATTLE_CNT, 25
	JE STARTBATTLE
	CALL DELAY
	MOV AH, 01
	INT 16H
	JZ FIELDLOOP
	MOV AH, 0
	INT 16H
	CMP ISDELAYDONE, 0
	JE FIELDLOOP
	CMP AH, 48H
	JE MOVECHARUP
	CMP AH, 50H
	JE MOVECHARDWN
	CMP AH, 4DH
	JE MOVECHARRHT
	CMP AH, 4BH
	JE MOVECHARLFT
	CMP AH, 01H
	JE EXIT
	JMP MAINLOOP
	
STARTBOSSFIGHT:
	MOV ISBOSS, 1
	JMP STARTBATTLE
	
	
MOVECHARUP:
	MOV AX, CURRENT_POS
	SUB AX, 1
	MOV TEMPPOS, AX
	CALL CHECKMOVE
	CMP ISMOVEVALID, 1
	JE MVUP
	JMP MAINLOOP
	
	
MVUP:
	MOV AX, CURRENT_POS
	SUB AX, 1
	MOV CURRENT_POS, AX
	
	CALL CLRHERO
	SUB DI, 1600
	CALL REDRAWFIELD
	MOV STARTDELAY, 1
	CALL DELAY
	MOV AX, BATTLE_CNT
	ADD AX, 1
	MOV BATTLE_CNT, AX
	JMP MAINLOOP
	
MOVECHARDWN:
	MOV AX, CURRENT_POS
	ADD AX, 1
	MOV TEMPPOS, AX
	CALL CHECKMOVE
	CMP ISMOVEVALID, 1
	JE MVDWN
	JMP MAINLOOP
	
MVDWN:
	MOV AX, CURRENT_POS
	ADD AX, 1
	MOV CURRENT_POS, AX
	CALL CLRHERO
	ADD DI, 1600
	CALL REDRAWFIELD
	MOV STARTDELAY, 1
	CALL DELAY
	MOV AX, BATTLE_CNT
	ADD AX, 1
	MOV BATTLE_CNT, AX
	JMP MAINLOOP
	
MOVECHARRHT:
	MOV AX, CURRENT_POS
	ADD AX, 25
	MOV TEMPPOS, AX
	CALL CHECKMOVE
	CMP ISMOVEVALID, 1
	JE MVRHT
	JMP MAINLOOP
	
MVRHT:
	MOV AX, CURRENT_POS
	ADD AX, 25
	MOV CURRENT_POS, AX
	
	CALL CLRHERO
	ADD DI, 5
	CALL REDRAWFIELD
	MOV STARTDELAY, 1
	CALL DELAY
	MOV AX, BATTLE_CNT
	ADD AX, 1
	MOV BATTLE_CNT, AX
	JMP MAINLOOP
	
MOVECHARLFT:
	MOV AX, CURRENT_POS
	SUB AX, 25
	MOV TEMPPOS, AX
	CALL CHECKMOVE
	CMP ISMOVEVALID, 1
	JE MVLFT
	JMP MAINLOOP
	
MVLFT:
	MOV AX, CURRENT_POS
	SUB AX, 25
	MOV CURRENT_POS, AX
	
	CALL CLRHERO
	SUB DI, 5
	CALL REDRAWFIELD
	MOV STARTDELAY, 1
	CALL DELAY
	MOV AX, BATTLE_CNT
	ADD AX, 1
	MOV BATTLE_CNT, AX
	JMP MAINLOOP
	
EXIT:
	;RETURN THE VIDEO MODE AND EXIT
	POP AX
	MOV AH, 0
	INT 10H
	MOV AH, 4CH
	INT 21H
	
	
main endp

PROCMENU proc

CMP CURRENT_SLC, 1
JE ATTSQUARE
CMP CURRENT_SLC, 2
JE ATTTRIANGLE
CMP CURRENT_SLC, 3
JE ATTCIRCLE
CMP CURRENT_SLC, 4
JE PLYMRPHATT
RET
PROCMENU endp

ATTSQUARE proc
CALL DRAWSQRATT
CMP ISBOSS, 1
JE SQRHP
MOV AX, MONSTERHP
SUB AX, 3
MOV MONSTERHP, AX
JMP SQRATTDN

SQRHP:
MOV AX, MONSTERHP
SUB AX, 1
MOV MONSTERHP, AX
MOV AX, MONSTERHP2
SUB AX, 3
MOV MONSTERHP2, AX

SQRATTDN:
CALL REDRAW
JMP MONSTERLOOP
RET
ATTSQUARE endp

ATTTRIANGLE proc
CALL DRAWTRNGLATT
CMP ISBOSS, 1
JE TRNGLHP
MOV AX, MONSTERHP
SUB AX, 3
MOV MONSTERHP, AX
JMP TRNGLATTDN

TRNGLHP:
MOV AX, MONSTERHP
SUB AX, 1
MOV MONSTERHP, AX
MOV AX, MONSTERHP3
SUB AX, 3
MOV MONSTERHP3, AX

TRNGLATTDN:
CALL REDRAW
JMP MONSTERLOOP
RET
ATTTRIANGLE endp

ATTCIRCLE proc
CALL DRAWCIRCLEATT
CMP ISBOSS, 1
JE CIRCLEHP
MOV AX, MONSTERHP
SUB AX, 3
MOV MONSTERHP, AX
JMP CIRCLEATTDN

CIRCLEHP:
MOV AX, MONSTERHP
SUB AX, 1
MOV MONSTERHP, AX
MOV AX, MONSTERHP4
SUB AX, 3
MOV MONSTERHP4, AX

CIRCLEATTDN:
CALL REDRAW
JMP MONSTERLOOP
RET
ATTCIRCLE endp

PLYMRPHATT proc
CMP ISBOSS, 1
JE PLYMRPHHP
JMP PLYFAIL

PLYMRPHHP:
CMP MONSTERHP2, 0
JE PASS2
CMP MONSTERHP2, 6
JAE PASS2
JMP PLYFAIL
PASS2:
CMP MONSTERHP3, 0
JE PASS3
CMP MONSTERHP3, 6
JAE PASS3
JMP PLYFAIL
PASS3:
CMP MONSTERHP4, 0
JE PASS4
CMP MONSTERHP4, 6
JAE PASS4
JMP PLYFAIL
PASS4:
MOV AX, MONSTERHP
SUB AX, 11
MOV MONSTERHP, AX
CALL DRAWPLYMRPHATT
JMP PLYMRPHATTDN

PLYFAIL:
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 13
	MOV DL, 5
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset FAILPLY
	MOV AH, 09H
	INT 21H	
	
	MOV SLEEPTIME, 25
	CALL SLEEP
	
	MOV AH, 6
	MOV AL, 0
	MOV CH, 13
	MOV CL, 5
	MOV DH, 13
	MOV DL, 33
	MOV BH, 0
	INT 10H

PLYMRPHATTDN:
CALL REDRAW
JMP MONSTERLOOP
RET
PLYMRPHATT endp

DRAWSQRATT proc
MOV AX, 0000H
PUSH DI
MOV DI, 12950

SQATTLOOP:
MOV AL, 122
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB
SUB DI, 1285

MOV SLEEPTIME, 2
CALL SLEEP

MOV AL, 0
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB
SUB DI, 1290

CMP DI, 12860
JA SQATTLOOP
POP DI
RET
DRAWSQRATT endp

DRAWTRNGLATT proc
MOV AX, 0000H
PUSH DI
MOV DI, 12950
TRNGLATTLOOP:
MOV AL, 35
STOSB
ADD DI, 318
STOSB
STOSB
ADD DI, 317
STOSB
STOSB
STOSB
ADD DI, 316
STOSB
STOSB
STOSB
STOSB
ADD DI, 317
STOSB
STOSB
STOSB
ADD DI, 318
STOSB
STOSB
ADD DI, 319
STOSB
SUB DI, 1921
MOV SLEEPTIME, 2
CALL SLEEP

MOV AL, 0
STOSB
ADD DI, 318
STOSB
STOSB
ADD DI, 317
STOSB
STOSB
STOSB
ADD DI, 316
STOSB
STOSB
STOSB
STOSB
ADD DI, 317
STOSB
STOSB
STOSB
ADD DI, 318
STOSB
STOSB
ADD DI, 319
STOSB
SUB DI, 1926

CMP DI, 12860
JA TRNGLATTLOOP
POP DI
RET
DRAWTRNGLATT endp

DRAWCIRCLEATT proc
MOV AX, 0000H
PUSH DI
MOV DI, 12950
CIRCLEATTLOOP:
MOV AL, 50
STOSB
ADD DI, 319
STOSB
STOSB
STOSB
ADD DI, 316
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 316
STOSB
STOSB
STOSB
ADD DI, 319
STOSB
SUB DI, 1603
MOV SLEEPTIME, 2
CALL SLEEP

MOV AL, 0
STOSB
ADD DI, 319
STOSB
STOSB
STOSB
ADD DI, 316
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 316
STOSB
STOSB
STOSB
ADD DI, 319
STOSB
SUB DI, 1609

CMP DI, 12860
JA CIRCLEATTLOOP
POP DI
RET
DRAWCIRCLEATT endp


REDRAWFIELD proc

;SET VIDEO MODE

;CALL DRAWMAPTILES
CALL DRAWHERO

RET
REDRAWFIELD endp

REDRAW proc
	CALL CLRMENU
	CALL DRAWMENUBOX
	CALL DRAWTEXT
	CALL DRAWPOINTER
	CALL DRAWHP
	RET
REDRAW endp


DRAWHP proc
	
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 15
	MOV DL, 11
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset HPTEXT
	MOV AH, 09H
	INT 21H
	CMP PLAYERHP, 0
	JE EXTHP
	CMP PLAYERHP, 21
	JAE EXTHP
	
	MOV CX, PLAYERHP
	MOV HPPOS, 19
PHPLOOP:
	MOV AH, 02
	MOV BH, 00
	MOV DH, 15
	MOV DL, HPPOS
	INT 10H
	
	MOV AX, 0000H
	MOV AL, HPPOS
	ADD AL, 1
	MOV HPPOS, AL
	MOV AL, 0000H
	
	MOV DX, offset POINTER_SYM
	MOV AH, 09H
	INT 21H
	
	LOOP PHPLOOP
	
	MOV AH, 02
	MOV BH, 00
	MOV DH, 17
	MOV DL, 11
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset MHPTEXT
	MOV AH, 09H
	INT 21H
	
	CMP MONSTERHP, 0
	JE EXTHP
	CMP MONSTERHP, 21
	JAE EXTHP
	
	MOV CX, MONSTERHP
	MOV MHPPOS, 19
MHPLOOP:
	MOV AH, 02
	MOV BH, 00
	MOV DH, 17
	MOV DL, MHPPOS
	INT 10H
	
	MOV AX, 0000H
	MOV AL, MHPPOS
	ADD AL, 1
	MOV MHPPOS, AL
	MOV AL, 0000H
	
	MOV DX, offset POINTER_SYM
	MOV AH, 09H
	INT 21H
	
	LOOP MHPLOOP
	
	CMP MONSTERHP2, 21
	JAE M3
	CMP MONSTERHP2, 0
	JE M3
	
	MOV AH, 02
	MOV BH, 00
	MOV DH, 19
	MOV DL, 11
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset MHPTEXT
	MOV AH, 09H
	INT 21H
	
	MOV CX, MONSTERHP2
	MOV MHPPOS, 19
MHPLOOP2:
	MOV AH, 02
	MOV BH, 00
	MOV DH, 19
	MOV DL, MHPPOS
	INT 10H
	
	MOV AX, 0000H
	MOV AL, MHPPOS
	ADD AL, 1
	MOV MHPPOS, AL
	MOV AL, 0000H
	
	MOV DX, offset POINTER_SYM
	MOV AH, 09H
	INT 21H
	
	LOOP MHPLOOP2
	
M3: 
	CMP MONSTERHP3, 21
	JAE M4
	CMP MONSTERHP3, 0
	JE M4
	
	MOV AH, 02
	MOV BH, 00
	MOV DH, 21
	MOV DL, 11
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset MHPTEXT
	MOV AH, 09H
	INT 21H
	
	MOV CX, MONSTERHP3
	MOV MHPPOS, 19
MHPLOOP3:
	MOV AH, 02
	MOV BH, 00
	MOV DH, 21
	MOV DL, MHPPOS
	INT 10H
	
	MOV AX, 0000H
	MOV AL, MHPPOS
	ADD AL, 1
	MOV MHPPOS, AL
	MOV AL, 0000H
	
	MOV DX, offset POINTER_SYM
	MOV AH, 09H
	INT 21H
	
	LOOP MHPLOOP3
	
M4:
	CMP MONSTERHP4, 21
	JAE EXTHP
	CMP MONSTERHP4, 0
	JE EXTHP
	
	MOV AH, 02
	MOV BH, 00
	MOV DH, 23
	MOV DL, 11
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset MHPTEXT
	MOV AH, 09H
	INT 21H
	
	MOV CX, MONSTERHP4
	MOV MHPPOS, 19
MHPLOOP4:
	MOV AH, 02
	MOV BH, 00
	MOV DH, 23
	MOV DL, MHPPOS
	INT 10H
	
	MOV AX, 0000H
	MOV AL, MHPPOS
	ADD AL, 1
	MOV MHPPOS, AL
	MOV AL, 0000H
	
	MOV DX, offset POINTER_SYM
	MOV AH, 09H
	INT 21H
	
	LOOP MHPLOOP4
	
EXTHP:

	RET
DRAWHP endp

CLEARSCN proc
	MOV AH, 6
	MOV AL, 0
	MOV CH, 0
	MOV CL, 0
	MOV DH, 24
	MOV DL, 79
	MOV BH, 0
	INT 10H
	RET
CLEARSCN endp

CLRMENU proc
	MOV AH, 6
	MOV AL, 0
	MOV CH, 15
	MOV CL, 0
	MOV DH, 24
	MOV DL, 79
	MOV BH, 0
	INT 10H
	RET
CLRMENU endp

UPARROW proc	;CALLED WHEN THE UP ARROW IS PRESSED IN BATTLE, HANDLES THE UP ARROW MENU LOGIC
	MOV AX, 0000H
	MOV AL, CURRENT_ROW
	CMP AL, 16
	JZ STAYUP	
	
	MOVEUP:
		SUB AX, 2
		MOV CURRENT_ROW, AL
		CALL REDRAW
		MOV BX, CURRENT_SLC
		SUB BX, 1
		MOV CURRENT_SLC, BX
		MOV STARTDELAY, 1
		CALL REDRAW
		CALL DELAY
		JMP CHECKKEYPRESS
	
	STAYUP:
		MOV AX, 22
		MOV CURRENT_ROW, AL
		CALL REDRAW
		MOV CURRENT_SLC, 4
		MOV STARTDELAY, 1
		CALL REDRAW
		CALL DELAY
		JMP CHECKKEYPRESS
	
	
	EXITUP:

	RET
UPARROW endp

DOWNARROW proc	;CALLED WHEN DOWN ARROW IS PRESSED, HANDLES THE DOWN ARROW MENU LOGIC
	MOV AX, 0000H
	MOV AL, CURRENT_ROW
	CMP AL, 22
	JNC STAYDWN	
	
	MOVEDWN:
		ADD AX, 2
		MOV CURRENT_ROW, AL
		CALL REDRAW
		MOV BX, CURRENT_SLC
		ADD BX, 1
		MOV CURRENT_SLC, BX
		MOV STARTDELAY, 1
		CALL REDRAW
		CALL DELAY
		JMP CHECKKEYPRESS
	
	STAYDWN:
		MOV AX, 16
		MOV CURRENT_ROW, AL
		CALL REDRAW
		MOV CURRENT_SLC, 1
		MOV STARTDELAY, 1
		CALL REDRAW
		CALL DELAY
		JMP CHECKKEYPRESS
	
	EXITDWN:
	RET
DOWNARROW endp

DRAWPOINTER proc
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, CURRENT_ROW
	MOV DL, 2
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset POINTER_SYM
	MOV AH, 09H
	INT 21H	
RET
DRAWPOINTER endp

DRAWMENUBOX proc
PUSH DI
	;CREATE THE BOX
	MOV START_COLUMN, 10
	MOV START_ROW, 120
	MOV BOX_COLOR, 5
	MOV BOXSIZE, 75
	
INITBOX:
	MOV AL, BOX_COLOR
	MOV CX, START_COLUMN
	MOV SI, START_ROW
	MOV AX, 320	;NUMBER OF COLUMNS IN A ROW
	MUL SI	;SI TIMES AX GIVES THE STARTING PIXEL
	MOV DI, AX
	ADD DI, CX
	MOV PIXLOC, DI
	MOV CX, BOXSIZE
	MOV AL, BOX_COLOR
BOXTOP:
	REP STOSB

	MOV CX, BOXSIZE
	SUB CX, 2
	MOV AL, BOX_COLOR

BOXSIDES:
	MOV DI, PIXLOC
	ADD DI, 320
	STOSB
	DEC DI
	MOV PIXLOC, DI
	ADD DI, BOXSIZE
	DEC DI
	STOSB
	LOOP BOXSIDES

BOXBOTTOM:
	MOV DI, PIXLOC
	ADD DI, 320
	MOV CX, BOXSIZE
	MOV AL, BOX_COLOR
	REP STOSB
	POP DI
	RET
DRAWMENUBOX endp

DRAWTEXT proc
	
	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 16
	MOV DL, 3
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset FSTMENUTEXT
	MOV AH, 09H
	INT 21H	

	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 18
	MOV DL, 3
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset SNDMENUTEXT
	MOV AH, 09H
	INT 21H	

	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 20
	MOV DL, 3
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset TRDMENUTEXT
	MOV AH, 09H
	INT 21H	

	;MOVE THE CURSER
	MOV AH, 02
	MOV BH, 00
	MOV DH, 22
	MOV DL, 3
	INT 10H
	
	;DRAW THE TEXT
	MOV DX, offset FRTMENUTEXT
	MOV AH, 09H
	INT 21H	
	
	RET
DRAWTEXT endp

DRAWMAPTILES proc
PUSH DI

;MOV DI, 4898	;THE TOP LEFT CORNER OF THE MAP IN MEMORY
MOV DI, 0

;ROW ONE
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW TWO
MOV DI, 1600
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX


;ROW THREE

MOV DI, 3200
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW FOUR

MOV DI, 4800
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW FIVE

MOV DI, 6400
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW SIX

MOV DI, 8000
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW SEVEN

MOV DI, 9600
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW EIGHT

MOV DI, 11200
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW NINE

MOV DI, 12800
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW TEN

MOV DI, 14400
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW ELEVEN

MOV DI, 16000
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW TWELVE

MOV DI, 17600
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW THIRTEEN
MOV DI, 19200
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW FOURTEEN

MOV DI, 20800
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW FIFTEEN

MOV DI, 22400
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW SIXTEEN

MOV DI, 24000
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW SEVENTEEN

MOV DI, 25600
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW EIGHTEEN

MOV DI, 27200
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280

;ROW NINETEEN

MOV DI, 28800
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW TWENTY

MOV DI, 30400
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW TWENTYONE

MOV DI, 32000
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW TWENTYTWO

MOV DI, 33600
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW TWENTYTHREE

MOV DI, 35200
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW TWENTYFOUR

MOV DI, 36800
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW TWENTYFIVE

MOV DI, 38400
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWBLUEBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX

;ROW TWENTYSIX

MOV DI, 40000
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
SUB DI, 1280
CALL DRAWREDBOX
POP DI

RET

DRAWMAPTILES endp

DRAWBLUEBOX proc

MOV AX, 0000H

MOV AL, 1
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB

RET
DRAWBLUEBOX endp

DRAWREDBOX proc

MOV AX, 0000H

MOV AL, 4
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315	;MOVE TO THE NEXT ROW
STOSB
STOSB
STOSB
STOSB
STOSB

RET
DRAWREDBOX endp

DRAWHERO proc

MOV AL, 2
STOSB
ADD DI, 318
STOSB
STOSB
STOSB
ADD DI, 316
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 316
STOSB
STOSB
STOSB
ADD DI, 318
STOSB
SUB DI, 1281

RET
DRAWHERO endp

CLRHERO proc

MOV AL, 1
STOSB
ADD DI, 318
STOSB
STOSB
STOSB
ADD DI, 316
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 316
STOSB
STOSB
STOSB
ADD DI, 318
STOSB
SUB DI, 1281

RET
CLRHERO endp

CHECKMOVE proc

	CMP TEMPPOS, 586
	JAE MOVE_NOT_OK
	CMP TEMPPOS, 561
	JAE B1
	CMP TEMPPOS, 536
	JAE B2
	CMP TEMPPOS, 523
	JAE B3
	CMP TEMPPOS, 511
	JAE B4
	CMP TEMPPOS, 506
	JE MOVE_NOT_OK
	CMP TEMPPOS, 498
	JAE B5
	CMP TEMPPOS, 486
	JAE B6
	CMP TEMPPOS, 481
	JAE B7
	CMP TEMPPOS, 473
	JAE B8
	CMP TEMPPOS, 461
	JAE B9
	CMP TEMPPOS, 456
	JAE B10
	CMP TEMPPOS, 448
	JAE B11
	CMP TEMPPOS, 443
	JAE B12
	CMP TEMPPOS, 437
	JAE B13
	CMP TEMPPOS, 431
	JAE B14
	CMP TEMPPOS, 423
	JAE B15
	CMP TEMPPOS, 417
	JAE B16
	CMP TEMPPOS, 412
	JAE B17
	CMP TEMPPOS, 407
	JAE B18
	CMP TEMPPOS, 398
	JAE B19
	CMP TEMPPOS, 392
	JAE B20
	CMP TEMPPOS, 387
	JAE B21
	CMP TEMPPOS, 383
	JE MOVE_NOT_OK
	CMP TEMPPOS, 376
	JE MOVE_NOT_OK
	CMP TEMPPOS, 367
	JAE B22
	CMP TEMPPOS, 362
	JAE B23
	CMP TEMPPOS, 358
	JE MOVE_NOT_OK
	CMP TEMPPOS, 351
	JE MOVE_NOT_OK
	CMP TEMPPOS, 342
	JAE B24
	CMP TEMPPOS, 337
	JAE B25
	CMP TEMPPOS, 333
	JE MOVE_NOT_OK
	CMP TEMPPOS, 326
	JE MOVE_NOT_OK
	CMP TEMPPOS, 317
	JAE B26
	CMP TEMPPOS, 312
	JAE B27
	CMP TEMPPOS, 308
	JE MOVE_NOT_OK
	CMP TEMPPOS, 292
	JAE B28
	CMP TEMPPOS, 287
	JAE B29
	CMP TEMPPOS, 282
	JE MOVE_NOT_OK
	CMP TEMPPOS, 274
	JAE B30
	CMP TEMPPOS, 261
	JAE B31
	CMP TEMPPOS, 256
	JAE B32
	CMP TEMPPOS, 249
	JAE B33
	CMP TEMPPOS, 236
	JAE B34
	CMP TEMPPOS, 224
	JAE B35
	CMP TEMPPOS, 211
	JAE B36
	CMP TEMPPOS, 199
	JAE B37
	CMP TEMPPOS, 186
	JAE B38
	CMP TEMPPOS, 174
	JAE B39
	CMP TEMPPOS, 169
	JAE B40
	CMP TEMPPOS, 161
	JE MOVE_NOT_OK
	CMP TEMPPOS, 149
	JAE B41
	CMP TEMPPOS, 124
	JAE B42
	CMP TEMPPOS, 114
	JAE B43
	CMP TEMPPOS, 99
	JAE B44
	CMP TEMPPOS, 90
	JAE B45
	CMP TEMPPOS, 74
	JAE B46
	CMP TEMPPOS, 49
	JAE B47
	CMP TEMPPOS, 44
	JAE B48
	CMP TEMPPOS, 1
	JAE B49
	
B1:
	CMP TEMPPOS, 581
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B2:
	CMP TEMPPOS, 553
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B3:
	CMP TEMPPOS, 527
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B4:
	CMP TEMPPOS, 515
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B5:
	CMP TEMPPOS, 503
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B6:
	CMP TEMPPOS, 488
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B7:
	CMP TEMPPOS, 482
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B8:
	CMP TEMPPOS, 478
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B9:
	CMP TEMPPOS, 463
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B10: 
	CMP TEMPPOS, 457
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B11:
	CMP TEMPPOS, 453
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B12: 
	CMP TEMPPOS, 444
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B13:
	CMP TEMPPOS, 438
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B14:
	CMP TEMPPOS, 433
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B15:
	CMP TEMPPOS, 428
	JBE MOVE_NOT_OK
	JMP MOVE_OK

B16:
	CMP TEMPPOS, 419
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B17:
	CMP TEMPPOS, 413
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B18:
	CMP TEMPPOS, 408
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B19:
	CMP TEMPPOS, 402
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B20:
	CMP TEMPPOS, 394
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B21:
	CMP TEMPPOS, 388
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B22:
	CMP TEMPPOS, 369
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B23:
	CMP TEMPPOS, 363
	JBE MOVE_NOT_OK
	JMP MOVE_OK

B24:
	CMP TEMPPOS, 344
	JBE MOVE_NOT_OK
	JMP MOVE_OK

B25:
	CMP TEMPPOS, 338
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B26:
	CMP TEMPPOS, 319
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B27:
	CMP TEMPPOS, 313
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B28:
	CMP TEMPPOS, 301
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B29:
	CMP TEMPPOS, 288
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B30:
	CMP TEMPPOS, 277
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B31:
	CMP TEMPPOS, 263
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B32:
	CMP TEMPPOS, 257
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B33:
	CMP TEMPPOS, 253
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B34:
	CMP TEMPPOS, 238
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B35:
	CMP TEMPPOS, 232
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B36:
	CMP TEMPPOS, 213
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B37:
	CMP TEMPPOS, 207
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B38:
	CMP TEMPPOS, 195
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B39:
	CMP TEMPPOS, 182
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B40:
	CMP TEMPPOS, 170
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B41:
	CMP TEMPPOS, 157
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B42:
	CMP TEMPPOS, 132
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B43:
	CMP TEMPPOS, 117
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B44:
	CMP TEMPPOS, 107
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B45:
	CMP TEMPPOS, 92
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B46:
	CMP TEMPPOS, 82
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B47:
	CMP TEMPPOS, 61
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B48:
	CMP TEMPPOS, 45
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
B49:
	CMP TEMPPOS, 37
	JBE MOVE_NOT_OK
	JMP MOVE_OK
	
MOVE_OK:
MOV ISMOVEVALID, 1
JMP ENDCHKMV

MOVE_NOT_OK:
MOV ISMOVEVALID, 0

ENDCHKMV:
RET
CHECKMOVE endp

DRAWTRIANGLE proc
MOV AL, 40
STOSB
ADD DI, 318
STOSB
STOSB
STOSB
ADD DI, 316
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 314
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 312
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 310
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 308
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 306
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 304
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 302
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 300
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 298
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 296
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 294
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
RET
DRAWTRIANGLE endp

DRAWSQUARE proc
MOV AL, 106
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 293
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB

RET
DRAWSQUARE endp

DELAY proc
	
	CMP ISDELAYDONE, 0
	JE CONT
	CMP STARTDELAY, 0
	JE DELAYNOTDONE
	MOV STARTDELAY, 0
	MOV AH, 00H
	INT 1AH
	ADD DX, TICKCOUNT
	ADD CX, TICKCOUNT
	MOV LOWERCOUNT, DX
	MOV HIGHERCOUNT, CX
	MOV ISDELAYDONE, 0
CONT:
	MOV AH, 00H
	INT 1AH
	CMP DX, LOWERCOUNT
	JE DELAYDONE
	CMP CX, HIGHERCOUNT
	JE DELAYDONE
	JMP DELAYNOTDONE
DELAYDONE:
	MOV ISDELAYDONE, 1
	RET

DELAYNOTDONE:
	RET
DELAY endp

SLEEP proc
	
	MOV AH, 00H
	INT 1AH
	ADD DX, SLEEPTIME
	ADD CX, SLEEPTIME
	MOV LOWERCOUNT2, DX
	MOV HIGHERCOUNT2, CX
	
SLEEPCONT:
	MOV AH, 00H
	INT 1AH
	CMP DX, LOWERCOUNT2
	JE SLEEPDONE
	CMP CX, HIGHERCOUNT2
	JE SLEEPDONE
	JMP SLEEPCONT

SLEEPDONE:
	RET
SLEEP endp

MATTTRIANGLE proc
CALL DRAWMTRNGLATT
MOV AX, PLAYERHP
SUB AX, 1
MOV PLAYERHP, AX

JMP BATTLELOOP

RET
MATTTRIANGLE endp

MPLYMRPHATT proc
CALL MDRAWPLYMRPHATT
MOV AX, PLAYERHP
SUB AX, 2
MOV PLAYERHP, AX

JMP BATTLELOOP

RET
MPLYMRPHATT endp

DRAWMTRNGLATT proc
MOV AX, 0000H
PUSH DI
MOV DI, 12860
MTRNGLATTLOOP:
MOV AL, 35
STOSB
ADD DI, 319
STOSB
STOSB
ADD DI, 318
STOSB
STOSB
STOSB
ADD DI, 317
STOSB
STOSB
STOSB
STOSB
ADD DI, 316
STOSB
STOSB
STOSB
ADD DI, 317
STOSB
STOSB
ADD DI, 318
STOSB
SUB DI, 1921
MOV SLEEPTIME, 2
CALL SLEEP

MOV AL, 0
STOSB
ADD DI, 319
STOSB
STOSB
ADD DI, 318
STOSB
STOSB
STOSB
ADD DI, 317
STOSB
STOSB
STOSB
STOSB
ADD DI, 316
STOSB
STOSB
STOSB
ADD DI, 317
STOSB
STOSB
ADD DI, 318
STOSB
SUB DI, 1916

CMP DI, 12950
JB MTRNGLATTLOOP
POP DI
RET
DRAWMTRNGLATT endp

DRAWPLYMRPHATT proc
CALL DRAWCIRCLEATT
CALL DRAWTRNGLATT
CALL DRAWSQRATT
RET
DRAWPLYMRPHATT endp

MDRAWPLYMRPHATT proc
CALL DRAWMTRNGLATT
CALL DRAWMTRNGLATT
RET
MDRAWPLYMRPHATT endp

MONSTERLOOP proc

CMP ISBOSS, 0
JE FIGHT
CALL MPLYMRPHATT
JMP MLOOPDONE



FIGHT:
	CALL MATTTRIANGLE
MLOOPDONE:
RET
MONSTERLOOP endp

DRAWBTLHERO proc
MOV AL, 2
STOSB
STOSB
ADD DI, 317
STOSB
STOSB
STOSB
STOSB
ADD DI, 315
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 313
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 313
STOSB
STOSB
STOSB
STOSB
STOSB
STOSB
ADD DI, 315
STOSB
STOSB
STOSB
STOSB
ADD DI, 317
STOSB
STOSB

RET
DRAWBTLHERO endp


end main